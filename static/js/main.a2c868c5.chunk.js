(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{218:function(e,t,n){e.exports=n(550)},223:function(e,t,n){},225:function(e,t,n){},341:function(e,t){},343:function(e,t){},375:function(e,t){},376:function(e,t){},442:function(e,t){},550:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(19),i=n.n(o),u=(n(223),n(79)),s=n(80),c=n(82),l=n(81),h=n(83),m=n(217),f=n(214),v=(n(225),n(117)),d=n.n(v),g=n(204),p=n(35),y=n(84),b=n(216),S=n(118),w=n.n(S),q=n(205),O=n.n(q),I=n(206),k=n.n(I),C=n(207),j=n.n(C),E={p:10,n:30,b:30,r:50,q:90,k:900};function M(e,t,n){var r=e.fen();return parseInt(r[r.length-1])>3?x(e,t,n):(new j.a).analyze(r,{master:!0,variant:"standard",speeds:["classical"]}).then(function(e){var t=e.moves;return t[Math.floor(Math.random()*t.length)].san}).catch(function(){return x(e,t,n)})}var N=0;function x(e,t,n){var r=e.moves(),a=k()(r,function(r){e.move(r);var a=function e(t,n,r,a,o,i){N++;if(0===n||t.game_over())return function(e,t){var n=O()(e.SQUARES,function(t,n){var r=e.get(n);if(null===r)return t;var a="w"===r.color?E[r.type]:-E[r.type];return t+a},0);return t?n:-n}(t,i);if(o){for(var u=Number.NEGATIVE_INFINITY,s=t.ugly_moves(),c=0;c<s.length&&(t.ugly_move(s[c]),u=Math.max(u,e(t,n-1,r,a,!o,i)),t.undo(),!((r=Math.max(r,u))>=a));c++);return u}for(var l=Number.POSITIVE_INFINITY,h=t.ugly_moves(),m=0;m<h.length&&(t.ugly_move(h[m]),l=Math.min(l,e(t,n-1,r,a,!o,i)),t.undo(),a=Math.min(a,l),!(r>=a));m++);return l}(e,t-1,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,!1,n);return e.undo(),a});return console.log("Positions evaluated: ",N),a}var T=n(208),D=n.n(T),A=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={fen:"start",dropSquareStyle:{},squareStyles:{},pieceSquare:"",square:"",history:[],boardWidth:window.innerWidth-100},n.game=void 0,n.updateDimensions=function(){n.setState(function(){return{boardWidth:window.innerWidth/2}})},n.removeHighlightSquare=function(){n.setState(function(e){var t=e.pieceSquare,n=e.history;return{squareStyles:W({pieceSquare:t,history:n})}})},n.highlightSquare=function(e,t){var r=[e].concat(Object(b.a)(t)).reduce(function(e,t){return Object(y.a)({},e,Object(p.a)({},t,{background:"rgba(50,205,50,0.4)"}),W({history:n.state.history,pieceSquare:n.state.pieceSquare}))},{});n.setState(function(e){var t=e.squareStyles;return{squareStyles:Object(y.a)({},t,r)}})},n.onDrop=function(e){var t=e.sourceSquare,r=e.targetSquare;if(null!==n.game.move({from:t,to:r,promotion:"q"}))return new Promise(function(e){n.setState(function(){return{fen:n.game.fen()}}),e(),n.updateHistory()}).then(function(){return setTimeout(function(){n.makeAIMove()},500)})},n.makeAIMove=Object(g.a)(d.a.mark(function e(){var t,r,a,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.game.game_over()&&n.resetGame(),t="black"===n.props.userColor,r=(new Date).getTime(),e.next=5,M(n.game,4,t);case 5:a=e.sent,o=(new Date).getTime(),console.log("Time: ",(o-r)/1e3),n.game.move(a),n.setState(function(){return{fen:n.game.fen()}}),n.updateHistory();case 11:case"end":return e.stop()}},e,this)})),n.resetGame=function(){n.game=new w.a},n.allowDrag=function(e){return e.piece[0]===n.props.userColor[0]},n.updateHistory=function(){var e=n.game.history({verbose:!0});n.setState(function(t){var n=t.pieceSquare;return{history:e,squareStyles:W({pieceSquare:n,history:e})}})},n.onMouseOverSquare=function(e){var t=n.game.moves({square:e,verbose:!0});if(0!==t.length){for(var r=[],a=0;a<t.length;a++)r.push(t[a].to);n.highlightSquare(e,r)}},n.onMouseOutSquare=function(e){return n.removeHighlightSquare(e)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.game=new w.a,window.addEventListener("resize",this.updateDimensions),"black"===this.props.userColor&&setTimeout(function(){e.makeAIMove()},500)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var e=this.state,t=e.fen,n=e.dropSquareStyle,r=e.squareStyles,o=e.boardWidth;return a.a.createElement(D.a,{allowDrag:this.allowDrag,boardStyle:{borderRadius:"5px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.5)"},dropSquareStyle:n,id:"HumanVsAI",onDrop:this.onDrop,onMouseOutSquare:this.onMouseOutSquare,onMouseOverSquare:this.onMouseOverSquare,onSquareClick:this.onMouseOverSquare,position:t,squareStyles:r,width:o})}}]),t}(r.Component),W=function(e){var t=e.pieceSquare,n=e.history,r=n.length&&n[n.length-1].from,a=n.length&&n[n.length-1].to;return Object(y.a)(Object(p.a)({},t,{backgroundColor:"rgba(255, 255, 0, 0.4)"}),n.length&&Object(p.a)({},r,{backgroundColor:"rgba(255, 255, 0, 0.4)"}),n.length&&Object(p.a)({},a,{backgroundColor:"rgba(255, 255, 0, 0.4)"}))},_=[{value:"black",label:"Black"},{value:"white",label:"White"}],B=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={inGame:!1,userColor:_[1]},n.handleSubmit=function(){n.setState(function(){return{inGame:!0}})},n.handleChange=function(e){n.setState(function(){return{userColor:e}})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.state.inGame?a.a.createElement("div",{style:G.boardsContainer},a.a.createElement(A,{userColor:this.state.userColor.value})):a.a.createElement("div",{style:G.container},a.a.createElement("div",{style:G.dialogue},a.a.createElement("h1",null,"Let's Play Chess!"),a.a.createElement("div",{style:G.select},a.a.createElement(m.a,{className:"select",onChange:this.handleChange,options:_,value:this.state.userColor})),a.a.createElement("div",{style:G.select},a.a.createElement(f.a,{color:"success",onClick:this.handleSubmit},"Play!"))))}}]),t}(r.Component),G={boardsContainer:{display:"flex",justifyContent:"space-around",alignItems:"center",flexWrap:"wrap",width:"100vw",marginTop:30,marginBottom:50},container:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},dialogue:{width:"50vw",textAlign:"center"},select:{display:"flex",justifyContent:"center",marginBottom:20}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=n(213);n(548);i.a.render(a.a.createElement(B,null),document.getElementById("root"));var P=document.getElementById("root");Object(H.disableBodyScroll)(P),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[218,2,1]]]);
//# sourceMappingURL=main.a2c868c5.chunk.js.map