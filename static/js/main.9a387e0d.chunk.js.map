{"version":3,"sources":["ai/alpha-beta.js","views/human-vs-ai.js","App.js","serviceWorker.js","index.js"],"names":["PIECE_VALUE","p","n","b","r","q","k","getBestMove","gameState","maxDepth","fen","OpeningExplorer","analyze","master","variant","speeds","ratings","then","analysis","moves","Math","floor","random","length","san","catch","newGameMoves","maxBy","move","value","alphabeta","depth","alpha","beta","isMaximizingPlayer","game_over","whiteToMove","turn","boardSum","reduce","SQUARES","sum","square","squareState","get","color","type","heuristic","Number","NEGATIVE_INFINITY","i","max","undo","POSITIVE_INFINITY","min","alphabetaRoot","HumanVsAI","_Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","dropSquareStyle","squareStyles","pieceSquare","history","boardWidth","window","innerWidth","game","undefined","updateDimensions","setState","removeHighlightSquare","_ref","squareStyling","highlightSquare","sourceSquare","squaresToHighlight","highlightStyles","toConsumableArray","a","c","objectSpread","defineProperty","background","_ref2","onDrop","_ref3","targetSquare","from","to","promotion","Promise","resolve","updateHistory","setTimeout","makeAIMove","asyncToGenerator","regenerator_default","mark","_callee","aiMove","wrap","_context","prev","next","resetGame","sent","stop","Chess","allowDrag","_ref5","piece","props","userColor","verbose","_ref6","onMouseOverSquare","push","onMouseOutSquare","inherits","createClass","key","_this2","addEventListener","removeEventListener","_this$state","react_default","createElement","chessboard_min_default","boardStyle","borderRadius","boxShadow","id","onSquareClick","position","width","Component","_ref7","backgroundColor","options","label","App","inGame","handleSubmit","handleChange","style","styles","boardsContainer","human_vs_ai_HumanVsAI","container","dialogue","select","react_select_esm","className","onChange","reactstrap_es","onClick","display","justifyContent","alignItems","flexWrap","marginTop","marginBottom","height","textAlign","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","targetElement","disableBodyScroll","navigator","serviceWorker","ready","registration","unregister"],"mappings":"ogBAIMA,EAAc,CACnBC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,KAGG,SAASC,EAAYC,EAAWC,GACtC,IAAMC,EAAMF,EAAUE,MAKtB,OADiB,IAAIC,KAEnBC,QAAQF,EAAK,CACbG,QAAQ,EACRC,QAAS,WACTC,OAAQ,CAAC,aACTC,QAAS,CAAC,IAAM,KAAM,QAEtBC,KAAK,SAAAC,GAAY,IAEVC,EAASD,EAATC,MACP,OAAOA,EAAMC,KAAKC,MAAMD,KAAKE,SAAWH,EAAMI,SAASC,MAEvDC,MAAM,WACN,OAII,SAAuBjB,EAAWC,GACxC,IAAMiB,EAAelB,EAAUW,QAC/B,OAAOQ,IAAMD,EAAc,SAAAE,GAC1BpB,EAAUoB,KAAKA,GACf,IAAMC,EAaD,SAASC,EAAUtB,EAAWuB,EAAOC,EAAOC,EAAMC,GACxD,GAAc,IAAVH,GAAevB,EAAU2B,YAE5B,OAqCF,SAAmB3B,GAClB,IAAM4B,EAAmC,MAArB5B,EAAU6B,OACxBC,EAAWC,IAChB/B,EAAUgC,QACV,SAACC,EAAKC,GACL,IAAMC,EAAcnC,EAAUoC,IAAIF,GAClC,GAAoB,OAAhBC,EACH,OAAOF,EAER,IAAMZ,EACiB,MAAtBc,EAAYE,MACT7C,EAAY2C,EAAYG,OACvB9C,EAAY2C,EAAYG,MAC7B,OAAOL,EAAMZ,GAEd,GAED,OAAOO,EAAcE,GAAYA,EAtDzBS,CAAUvC,GAElB,GAAI0B,EAAoB,CAGvB,IAFA,IAAIL,EAAQmB,OAAOC,kBACb9B,EAAQX,EAAUW,QACf+B,EAAI,EAAGA,EAAI/B,EAAMI,SACzBf,EAAUoB,KAAKT,EAAM+B,IACrBrB,EAAQT,KAAK+B,IACZtB,EACAC,EAAUtB,EAAWuB,EAAQ,EAAGC,EAAOC,GAAM,IAE9CzB,EAAU4C,UACVpB,EAAQZ,KAAK+B,IAAInB,EAAOH,KACXI,IARoBiB,KAYlC,OAAOrB,EAIP,IAFA,IAAIA,EAAQmB,OAAOK,kBACblC,EAAQX,EAAUW,QACf+B,EAAI,EAAGA,EAAI/B,EAAMI,SACzBf,EAAUoB,KAAKT,EAAM+B,IACrBrB,EAAQT,KAAKkC,IACZzB,EACAC,EAAUtB,EAAWuB,EAAQ,EAAGC,EAAOC,GAAM,IAE9CzB,EAAU4C,OACVnB,EAAOb,KAAKkC,IAAIrB,EAAMJ,KAClBG,GAASC,IARoBiB,IAWjC,OAAOrB,EAhDMC,CACbtB,EACAC,EAAW,EACXuC,OAAOC,kBACPD,OAAOK,mBACP,GAID,OADA7C,EAAU4C,OACHvB,IAjBC0B,CAAc/C,EAAWC,2BC1BtB+C,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAN,GAAA,QAAAO,EAAAC,UAAAzC,OAAA0C,EAAA,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAAF,EAAAE,GAAAH,UAAAG,GAAA,OAAAR,EAAAC,OAAAQ,EAAA,EAAAR,CAAAE,MAAAJ,EAAAE,OAAAS,EAAA,EAAAT,CAAAJ,IAAAc,KAAAC,MAAAb,EAAA,CAAAI,MAAAU,OAAAP,MAGCQ,MAAQ,CACP/D,IAAK,QAELgE,gBAAiB,GAEjBC,aAAc,GAEdC,YAAa,GAEblC,OAAQ,GAERmC,QAAS,GACTC,WAAYC,OAAOC,WAAa,GAflCrB,EAgCCsB,UAAOC,EAhCRvB,EAkCCwB,iBAAmB,WAClBxB,EAAKyB,SAAS,iBAAO,CAACN,WAAYC,OAAOC,WAAa,MAnCxDrB,EAuCC0B,sBAAwB,WACvB1B,EAAKyB,SAAS,SAAAE,GAAA,IAAEV,EAAFU,EAAEV,YAAaC,EAAfS,EAAeT,QAAf,MAA6B,CAC1CF,aAAcY,EAAc,CAACX,cAAaC,gBAzC7ClB,EA8CC6B,gBAAkB,SAACC,EAAcC,GAChC,IAAMC,EAAkB,CAACF,GAADjB,OAAAZ,OAAAgC,EAAA,EAAAhC,CAAkB8B,IAAoBnD,OAC7D,SAACsD,EAAGC,GACH,OAAOlC,OAAAmC,EAAA,EAAAnC,CAAA,GACHiC,EADJjC,OAAAoC,EAAA,EAAApC,CAAA,GAGGkC,EAAI,CACJG,WAAY,wBAGXV,EAAc,CAChBV,QAASlB,EAAKc,MAAMI,QACpBD,YAAajB,EAAKc,MAAMG,gBAI3B,IAGDjB,EAAKyB,SAAS,SAAAc,GAAA,IAAEvB,EAAFuB,EAAEvB,aAAF,MAAqB,CAClCA,aAAaf,OAAAmC,EAAA,EAAAnC,CAAA,GAAKe,EAAiBgB,OAlEtChC,EAsECwC,OAAS,SAAAC,GAAkC,IAAhCX,EAAgCW,EAAhCX,aAAcY,EAAkBD,EAAlBC,aASxB,GAAa,OAPF1C,EAAKsB,KAAKrD,KAAK,CACzB0E,KAAMb,EACNc,GAAIF,EACJG,UAAW,MAMZ,OAAO,IAAIC,QAAQ,SAAAC,GAClB/C,EAAKyB,SAAS,iBAAO,CACpB1E,IAAKiD,EAAKsB,KAAKvE,SAEhBgG,IACA/C,EAAKgD,kBACH1F,KAAK,kBACP2F,WAAW,WACVjD,EAAKkD,cACH,QA1FNlD,EA8FCkD,WA9FDjD,OAAAkD,EAAA,EAAAlD,CAAAmD,EAAAlB,EAAAmB,KA8Fc,SAAAC,IAAA,IAAAC,EAAA,OAAAH,EAAAlB,EAAAsB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACR3D,EAAKsB,KAAK9C,aAEbwB,EAAK4D,YAHMH,EAAAE,KAAA,EAMS/G,EAAYoD,EAAKsB,KAAM,GANhC,OAMNiC,EANME,EAAAI,KAQZ7D,EAAKsB,KAAKrD,KAAKsF,GACfvD,EAAKyB,SAAS,iBAAO,CACpB1E,IAAKiD,EAAKsB,KAAKvE,SAEhBiD,EAAKgD,gBAZO,wBAAAS,EAAAK,SAAAR,EAAAnD,SA9FdH,EA6GC4D,UAAY,WACX5D,EAAKsB,KAAO,IAAIyC,KA9GlB/D,EAiHCgE,UAAY,SAAAC,GACX,OADwBA,EAAXC,MACA,KAAOlE,EAAKmE,MAAMC,UAAU,IAlH3CpE,EAqHCgD,cAAgB,WACf,IAAM9B,EAAUlB,EAAKsB,KAAKJ,QAAQ,CAACmD,SAAS,IAC5CrE,EAAKyB,SAAS,SAAA6C,GAAA,IAAErD,EAAFqD,EAAErD,YAAF,MAAoB,CACjCC,QAASA,EACTF,aAAcY,EAAc,CAACX,cAAaC,gBAzH7ClB,EA6HCuE,kBAAoB,SAAAxF,GAEnB,IAAIvB,EAAQwC,EAAKsB,KAAK9D,MAAM,CAC3BuB,OAAQA,EACRsF,SAAS,IAIV,GAAqB,IAAjB7G,EAAMI,OAAV,CAGA,IADA,IAAImE,EAAqB,GAChBxC,EAAI,EAAGA,EAAI/B,EAAMI,OAAQ2B,IACjCwC,EAAmByC,KAAKhH,EAAM+B,GAAGqD,IAGlC5C,EAAK6B,gBAAgB9C,EAAQgD,KA5I/B/B,EA+ICyE,iBAAmB,SAAA1F,GAAM,OAAIiB,EAAK0B,sBAAsB3C,IA/IzDiB,EAAA,OAAAC,OAAAyE,EAAA,EAAAzE,CAAAJ,EAAAC,GAAAG,OAAA0E,EAAA,EAAA1E,CAAAJ,EAAA,EAAA+E,IAAA,oBAAA1G,MAAA,WAkBqB,IAAA2G,EAAA1E,KACnBA,KAAKmB,KAAO,IAAIyC,IAChB3C,OAAO0D,iBAAiB,SAAU3E,KAAKqB,kBACV,UAAzBrB,KAAKgE,MAAMC,WACdnB,WAAW,WACV4B,EAAK3B,cACH,OAxBN,CAAA0B,IAAA,uBAAA1G,MAAA,WA6BEkD,OAAO2D,oBAAoB,SAAU5E,KAAKqB,oBA7B5C,CAAAoD,IAAA,SAAA1G,MAAA,WAiJU,IAAA8G,EACiD7E,KAAKW,MAAvD/D,EADCiI,EACDjI,IAAKgE,EADJiE,EACIjE,gBAAiBC,EADrBgE,EACqBhE,aAAcG,EADnC6D,EACmC7D,WAE3C,OACC8D,EAAA/C,EAAAgD,cAACC,EAAAjD,EAAD,CACC8B,UAAW7D,KAAK6D,UAChBoB,WAAY,CACXC,aAAc,MACdC,UAAW,iCAEZvE,gBAAiBA,EACjBwE,GAAG,YACH/C,OAAQrC,KAAKqC,OACbiC,iBAAkBtE,KAAKsE,iBACvBF,kBAAmBpE,KAAKoE,kBACxBiB,cAAerF,KAAKoE,kBACpBkB,SAAU1I,EACViE,aAAcA,EACd0E,MAAOvE,QAnKXtB,EAAA,CAA+B8F,aAyKzB/D,EAAgB,SAAAgE,GAA4B,IAA1B3E,EAA0B2E,EAA1B3E,YAAaC,EAAa0E,EAAb1E,QAC9BY,EAAeZ,EAAQtD,QAAUsD,EAAQA,EAAQtD,OAAS,GAAG+E,KAC7DD,EAAexB,EAAQtD,QAAUsD,EAAQA,EAAQtD,OAAS,GAAGgF,GAEnE,OAAO3C,OAAAmC,EAAA,EAAAnC,QAAAoC,EAAA,EAAApC,CAAA,GACLgB,EAAc,CAAC4E,gBAAiB,2BAC7B3E,EAAQtD,QAARqC,OAAAoC,EAAA,EAAApC,CAAA,GACF6B,EAAe,CACf+D,gBAAiB,2BAGf3E,EAAQtD,QAARqC,OAAAoC,EAAA,EAAApC,CAAA,GACFyC,EAAe,CACfmD,gBAAiB,6BCtLfC,EAAU,CACf,CAAC5H,MAAO,QAAS6H,MAAO,SACxB,CAAC7H,MAAO,QAAS6H,MAAO,UAkDVC,6MA9CdlF,MAAQ,CACPmF,QAAQ,EACR7B,UAAW0B,EAAQ,MAKpBI,aAAe,WACdlG,EAAKyB,SAAS,iBAAO,CAACwE,QAAQ,QAG/BE,aAAe,SAAA/B,GACdpE,EAAKyB,SAAS,iBAAO,CAAC2C,qIAItB,OAAKjE,KAAKW,MAAMmF,OAuBfhB,EAAA/C,EAAAgD,cAAA,OAAKkB,MAAOC,EAAOC,iBAClBrB,EAAA/C,EAAAgD,cAACqB,EAAD,CAAWnC,UAAWjE,KAAKW,MAAMsD,UAAUlG,SAtB3C+G,EAAA/C,EAAAgD,cAAA,OAAKkB,MAAOC,EAAOG,WAClBvB,EAAA/C,EAAAgD,cAAA,OAAKkB,MAAOC,EAAOI,UAClBxB,EAAA/C,EAAAgD,cAAA,+BACAD,EAAA/C,EAAAgD,cAAA,OAAKkB,MAAOC,EAAOK,QAClBzB,EAAA/C,EAAAgD,cAACyB,EAAA,EAAD,CACCC,UAAU,SACVC,SAAU1G,KAAKgG,aACfL,QAASA,EACT5H,MAAOiC,KAAKW,MAAMsD,aAGpBa,EAAA/C,EAAAgD,cAAA,OAAKkB,MAAOC,EAAOK,QAClBzB,EAAA/C,EAAAgD,cAAC4B,EAAA,EAAD,CAAQ5H,MAAM,UAAU6H,QAAS5G,KAAK+F,cAAtC,mBA/BWP,aAiDZU,EAAS,CACdC,gBAAiB,CAChBU,QAAS,OACTC,eAAgB,eAChBC,WAAY,SACZC,SAAU,OACVzB,MAAO,QACP0B,UAAW,GACXC,aAAc,IAEfb,UAAW,CACVQ,QAAS,OACTE,WAAY,SACZD,eAAgB,SAChBK,OAAQ,SAETb,SAAU,CACTf,MAAO,OACP6B,UAAW,UAEZb,OAAQ,CACPM,QAAS,OACTC,eAAgB,SAChBI,aAAc,KCvEIG,QACU,cAA7BpG,OAAOqG,SAASC,UAEc,UAA7BtG,OAAOqG,SAASC,UAEhBtG,OAAOqG,SAASC,SAASC,MACxB,+ECVHC,IAASC,OAAO5C,EAAA/C,EAAAgD,cAAC4C,EAAD,MAASC,SAASC,eAAe,SAEjD,IAAMC,EAAgBF,SAASC,eAAe,QAC9CE,4BAAkBD,GDsHb,kBAAmBE,WACtBA,UAAUC,cAAcC,MAAM/K,KAAK,SAAAgL,GAClCA,EAAaC","file":"static/js/main.9a387e0d.chunk.js","sourcesContent":["import reduce from 'lodash/reduce'\nimport maxBy from 'lodash/maxBy'\nimport OpeningExplorer from 'lichess-opening-explorer'\n\nconst PIECE_VALUE = {\n\tp: 10,\n\tn: 30,\n\tb: 30,\n\tr: 50,\n\tq: 90,\n\tk: 900,\n}\n\nexport function getBestMove(gameState, maxDepth) {\n\tconst fen = gameState.fen()\n\t// if (parseInt(fen[fen.length-1]) > 3) {\n\t//   return alphabetaRoot(gameState, maxDepth)\n\t// }\n\tconst explorer = new OpeningExplorer()\n\treturn explorer\n\t\t.analyze(fen, {\n\t\t\tmaster: false,\n\t\t\tvariant: 'standard',\n\t\t\tspeeds: ['classical'],\n\t\t\tratings: [2000, 2200, 2500],\n\t\t})\n\t\t.then(analysis => {\n\t\t\t// console.log(analysis)\n\t\t\tconst {moves} = analysis\n\t\t\treturn moves[Math.floor(Math.random() * moves.length)].san\n\t\t})\n\t\t.catch(() => {\n\t\t\treturn alphabetaRoot(gameState, maxDepth)\n\t\t})\n}\n\nexport function alphabetaRoot(gameState, maxDepth) {\n\tconst newGameMoves = gameState.moves()\n\treturn maxBy(newGameMoves, move => {\n\t\tgameState.move(move)\n\t\tconst value = alphabeta(\n\t\t\tgameState,\n\t\t\tmaxDepth - 1,\n\t\t\tNumber.NEGATIVE_INFINITY,\n\t\t\tNumber.POSITIVE_INFINITY,\n\t\t\ttrue,\n\t\t)\n\t\t// console.log(move, value)\n\t\tgameState.undo()\n\t\treturn value\n\t})\n}\n\nexport function alphabeta(gameState, depth, alpha, beta, isMaximizingPlayer) {\n\tif (depth === 0 || gameState.game_over()) {\n\t\t// console.log(heuristic(gameState))\n\t\treturn heuristic(gameState)\n\t}\n\tif (isMaximizingPlayer) {\n\t\tlet value = Number.NEGATIVE_INFINITY\n\t\tconst moves = gameState.moves()\n\t\tfor (let i = 0; i < moves.length; i++) {\n\t\t\tgameState.move(moves[i])\n\t\t\tvalue = Math.max(\n\t\t\t\tvalue,\n\t\t\t\talphabeta(gameState, depth - 1, alpha, beta, false),\n\t\t\t)\n\t\t\tgameState.undo()\n\t\t\talpha = Math.max(alpha, value)\n\t\t\tif (alpha >= beta) {\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\treturn value\n\t} else {\n\t\tlet value = Number.POSITIVE_INFINITY\n\t\tconst moves = gameState.moves()\n\t\tfor (let i = 0; i < moves.length; i++) {\n\t\t\tgameState.move(moves[i])\n\t\t\tvalue = Math.min(\n\t\t\t\tvalue,\n\t\t\t\talphabeta(gameState, depth - 1, alpha, beta, true),\n\t\t\t)\n\t\t\tgameState.undo()\n\t\t\tbeta = Math.min(beta, value)\n\t\t\tif (alpha >= beta) {\n\t\t\t\tbreak\n\t\t\t}\n\t\t\treturn value\n\t\t}\n\t}\n}\n\nfunction heuristic(gameState) {\n\tconst whiteToMove = gameState.turn() === 'w'\n\tconst boardSum = reduce(\n\t\tgameState.SQUARES,\n\t\t(sum, square) => {\n\t\t\tconst squareState = gameState.get(square)\n\t\t\tif (squareState === null) {\n\t\t\t\treturn sum\n\t\t\t}\n\t\t\tconst value =\n\t\t\t\tsquareState.color === 'w'\n\t\t\t\t\t? PIECE_VALUE[squareState.type]\n\t\t\t\t\t: -PIECE_VALUE[squareState.type]\n\t\t\treturn sum + value\n\t\t},\n\t\t0,\n\t)\n\treturn whiteToMove ? boardSum : -boardSum\n}\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport Chess from 'chess.js'\nimport {getBestMove} from '../ai/alpha-beta'\nimport Chessboard from 'chessboardjsx'\n\nexport class HumanVsAI extends Component {\n\tstatic propTypes = {children: PropTypes.func, userColor: PropTypes.string}\n\n\tstate = {\n\t\tfen: 'start',\n\t\t// square styles for active drop square\n\t\tdropSquareStyle: {},\n\t\t// custom square styles\n\t\tsquareStyles: {},\n\t\t// square with the currently clicked piece\n\t\tpieceSquare: '',\n\t\t// currently clicked square\n\t\tsquare: '',\n\t\t// array of past game moves\n\t\thistory: [],\n\t\tboardWidth: window.innerWidth / 2,\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.game = new Chess()\n\t\twindow.addEventListener('resize', this.updateDimensions)\n\t\tif (this.props.userColor === 'black') {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.makeAIMove()\n\t\t\t}, 500)\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.updateDimensions)\n\t}\n\n\tgame = undefined\n\n\tupdateDimensions = () => {\n\t\tthis.setState(() => ({boardWidth: window.innerWidth / 2}))\n\t}\n\n\t// keep clicked square style and remove hint squares\n\tremoveHighlightSquare = () => {\n\t\tthis.setState(({pieceSquare, history}) => ({\n\t\t\tsquareStyles: squareStyling({pieceSquare, history}),\n\t\t}))\n\t}\n\n\t// show possible moves\n\thighlightSquare = (sourceSquare, squaresToHighlight) => {\n\t\tconst highlightStyles = [sourceSquare, ...squaresToHighlight].reduce(\n\t\t\t(a, c) => {\n\t\t\t\treturn {\n\t\t\t\t\t...a,\n\t\t\t\t\t...{\n\t\t\t\t\t\t[c]: {\n\t\t\t\t\t\t\tbackground: 'rgba(50,205,50,0.4)',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t...squareStyling({\n\t\t\t\t\t\thistory: this.state.history,\n\t\t\t\t\t\tpieceSquare: this.state.pieceSquare,\n\t\t\t\t\t}),\n\t\t\t\t}\n\t\t\t},\n\t\t\t{},\n\t\t)\n\n\t\tthis.setState(({squareStyles}) => ({\n\t\t\tsquareStyles: {...squareStyles, ...highlightStyles},\n\t\t}))\n\t}\n\n\tonDrop = ({sourceSquare, targetSquare}) => {\n\t\t// see if the move is legal\n\t\tlet move = this.game.move({\n\t\t\tfrom: sourceSquare,\n\t\t\tto: targetSquare,\n\t\t\tpromotion: 'q', // always promote to a queen for example simplicity\n\t\t})\n\n\t\t// illegal move\n\t\tif (move === null) return\n\n\t\treturn new Promise(resolve => {\n\t\t\tthis.setState(() => ({\n\t\t\t\tfen: this.game.fen(),\n\t\t\t}))\n\t\t\tresolve()\n\t\t\tthis.updateHistory()\n\t\t}).then(() =>\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.makeAIMove()\n\t\t\t}, 500),\n\t\t)\n\t}\n\n\tmakeAIMove = async () => {\n\t\tif (this.game.game_over()) {\n\t\t\t// console.log('GAME OVER')\n\t\t\tthis.resetGame()\n\t\t}\n\t\t// const aiMove = getRandomMove(game)\n\t\tconst aiMove = await getBestMove(this.game, 2)\n\t\t// console.log(aiMove)\n\t\tthis.game.move(aiMove)\n\t\tthis.setState(() => ({\n\t\t\tfen: this.game.fen(),\n\t\t}))\n\t\tthis.updateHistory()\n\t}\n\n\tresetGame = () => {\n\t\tthis.game = new Chess()\n\t}\n\n\tallowDrag = ({piece}) => {\n\t\treturn piece[0] === this.props.userColor[0]\n\t}\n\n\tupdateHistory = () => {\n\t\tconst history = this.game.history({verbose: true})\n\t\tthis.setState(({pieceSquare}) => ({\n\t\t\thistory: history,\n\t\t\tsquareStyles: squareStyling({pieceSquare, history}),\n\t\t}))\n\t}\n\n\tonMouseOverSquare = square => {\n\t\t// get list of possible moves for this square\n\t\tlet moves = this.game.moves({\n\t\t\tsquare: square,\n\t\t\tverbose: true,\n\t\t})\n\n\t\t// exit if there are no moves available for this square\n\t\tif (moves.length === 0) return\n\n\t\tlet squaresToHighlight = []\n\t\tfor (let i = 0; i < moves.length; i++) {\n\t\t\tsquaresToHighlight.push(moves[i].to)\n\t\t}\n\n\t\tthis.highlightSquare(square, squaresToHighlight)\n\t}\n\n\tonMouseOutSquare = square => this.removeHighlightSquare(square)\n\n\trender() {\n\t\tconst {fen, dropSquareStyle, squareStyles, boardWidth} = this.state\n\n\t\treturn (\n\t\t\t<Chessboard\n\t\t\t\tallowDrag={this.allowDrag}\n\t\t\t\tboardStyle={{\n\t\t\t\t\tborderRadius: '5px',\n\t\t\t\t\tboxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)',\n\t\t\t\t}}\n\t\t\t\tdropSquareStyle={dropSquareStyle}\n\t\t\t\tid=\"HumanVsAI\"\n\t\t\t\tonDrop={this.onDrop}\n\t\t\t\tonMouseOutSquare={this.onMouseOutSquare}\n\t\t\t\tonMouseOverSquare={this.onMouseOverSquare}\n\t\t\t\tonSquareClick={this.onMouseOverSquare}\n\t\t\t\tposition={fen}\n\t\t\t\tsquareStyles={squareStyles}\n\t\t\t\twidth={boardWidth}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nconst squareStyling = ({pieceSquare, history}) => {\n\tconst sourceSquare = history.length && history[history.length - 1].from\n\tconst targetSquare = history.length && history[history.length - 1].to\n\n\treturn {\n\t\t[pieceSquare]: {backgroundColor: 'rgba(255, 255, 0, 0.4)'},\n\t\t...(history.length && {\n\t\t\t[sourceSquare]: {\n\t\t\t\tbackgroundColor: 'rgba(255, 255, 0, 0.4)',\n\t\t\t},\n\t\t}),\n\t\t...(history.length && {\n\t\t\t[targetSquare]: {\n\t\t\t\tbackgroundColor: 'rgba(255, 255, 0, 0.4)',\n\t\t\t},\n\t\t}),\n\t}\n}\n","import React, {Component} from 'react'\nimport Select from 'react-select'\nimport {Button} from 'reactstrap'\nimport './App.css'\nimport {HumanVsAI} from './views/human-vs-ai'\n\nconst options = [\n\t{value: 'black', label: 'Black'},\n\t{value: 'white', label: 'White'},\n]\n\nclass App extends Component {\n\tstate = {\n\t\tinGame: false,\n\t\tuserColor: options[1],\n\t}\n\n\tcomponentDidMount() {}\n\n\thandleSubmit = () => {\n\t\tthis.setState(() => ({inGame: true}))\n\t}\n\n\thandleChange = userColor => {\n\t\tthis.setState(() => ({userColor}))\n\t}\n\n\trender() {\n\t\tif (!this.state.inGame) {\n\t\t\treturn (\n\t\t\t\t<div style={styles.container}>\n\t\t\t\t\t<div style={styles.dialogue}>\n\t\t\t\t\t\t<h1>Let&apos;s Play Chess!</h1>\n\t\t\t\t\t\t<div style={styles.select}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tclassName=\"select\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\t\tvalue={this.state.userColor}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={styles.select}>\n\t\t\t\t\t\t\t<Button color=\"success\" onClick={this.handleSubmit}>\n\t\t\t\t\t\t\t\tPlay!\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t\treturn (\n\t\t\t<div style={styles.boardsContainer}>\n\t\t\t\t<HumanVsAI userColor={this.state.userColor.value} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default App\n\nconst styles = {\n\tboardsContainer: {\n\t\tdisplay: 'flex',\n\t\tjustifyContent: 'space-around',\n\t\talignItems: 'center',\n\t\tflexWrap: 'wrap',\n\t\twidth: '100vw',\n\t\tmarginTop: 30,\n\t\tmarginBottom: 50,\n\t},\n\tcontainer: {\n\t\tdisplay: 'flex',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center',\n\t\theight: '100vh',\n\t},\n\tdialogue: {\n\t\twidth: '50vw',\n\t\ttextAlign: 'center',\n\t},\n\tselect: {\n\t\tdisplay: 'flex',\n\t\tjustifyContent: 'center',\n\t\tmarginBottom: 20,\n\t},\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n\t\t),\n)\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA',\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error)\n\t\t})\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type')\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.',\n\t\t\t)\n\t\t})\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister()\n\t\t})\n\t}\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport {disableBodyScroll} from 'body-scroll-lock'\nimport 'bootstrap/dist/css/bootstrap.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\nconst targetElement = document.getElementById('root')\ndisableBodyScroll(targetElement)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}